<div class="register-wrapper">

    <mat-card class="register-card mat-elevation-z0">

        <div class="register-header">
            <h2>Create Account</h2>
            <p>Fill in the details to register</p>
        </div>

        <form [formGroup]="registerForm" (ngSubmit)="register()">

            <div class="row">
                <mat-form-field appearance="outline" class="half-width">
                    <mat-label>First Name</mat-label>
                    <input matInput formControlName="firstName" />
                    <mat-error *ngIf="registerForm.get('firstName')?.hasError('required')">
                        First Name is required
                    </mat-error>
                </mat-form-field>

                <mat-form-field appearance="outline" class="half-width">
                    <mat-label>Last Name</mat-label>
                    <input matInput formControlName="lastName" />
                    <mat-error *ngIf="registerForm.get('lastName')?.hasError('required')">
                        Last Name is required
                    </mat-error>
                </mat-form-field>
            </div>



            <!-- Email -->
            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Email</mat-label>
                <input matInput formControlName="email" type="email" />
                <mat-error *ngIf="registerForm.get('email')?.hasError('required')">
                    Email is required
                </mat-error>
                <mat-error *ngIf="registerForm.get('email')?.hasError('email')">
                    Enter valid email
                </mat-error>
            </mat-form-field>

            <!-- Password -->
            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Password</mat-label>

                <input matInput [type]="hidePassword() ? 'password' : 'text'" formControlName="password">

                <button mat-icon-button matSuffix type="button" (click)="togglePassword()">
                    <mat-icon>
                        {{ hidePassword() ? 'visibility_off' : 'visibility' }}
                    </mat-icon>
                </button>

                <!-- Required -->
                <mat-error *ngIf="registerForm.get('password')?.touched 
                    && registerForm.get('password')?.hasError('required')">
                    Password is required
                </mat-error>

                <!-- Strong Pattern -->
                <mat-error *ngIf="registerForm.get('password')?.hasError('pattern')">
                    Must include uppercase, lowercase, number & special character (8+ chars)
                </mat-error>

            </mat-form-field>


            <!-- Confirm Password -->
            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Confirm Password</mat-label>

                <input matInput [type]="hideConfirmPassword() ? 'password' : 'text'" formControlName="confirmPassword">

                <button mat-icon-button matSuffix type="button" (click)="toggleConfirmPassword()">
                    <mat-icon>
                        {{ hideConfirmPassword() ? 'visibility_off' : 'visibility' }}
                    </mat-icon>
                </button>

                <!-- Required -->
                <mat-error *ngIf="registerForm.get('confirmPassword')?.touched 
                    && registerForm.get('confirmPassword')?.hasError('required')">
                    Confirm password is required
                </mat-error>

                <!-- Password Mismatch -->
                <mat-error *ngIf="
                    registerForm.get('confirmPassword')?.touched &&
                    registerForm.get('confirmPassword')?.hasError('passwordMismatch')">
                    Passwords do not match
                </mat-error>

            </mat-form-field>


            <!-- Submit -->
            <button mat-raised-button color="primary" type="submit" class="full-width register-btn"
                [disabled]="isLoading()">
                <mat-progress-spinner *ngIf="isLoading()" diameter="20" mode="indeterminate">
                </mat-progress-spinner>

                <span *ngIf="!isLoading()">Register</span>
            </button>

        </form>

        <div class="register-footer">
            <span>Already have an account?</span>
            <a routerLink="/auth/login">Login</a>
        </div>

    </mat-card>

</div>